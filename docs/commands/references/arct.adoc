---
layout: default
title: arct
parent: Command Reference
nav_order: 9
---

== arct

Appends an arc defined by two tangent lines to the current path.

=== Syntax

----
x1 y1 x2 y2 r arct → -
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| 4
| `r` (number - arc radius)

| 3
| `y2` (number - second tangent point y)

| 2
| `x2` (number - second tangent point x)

| 1
| `y1` (number - first tangent point y)

| 0
| `x1` (number - first tangent point x)
|===

.After
[cols="1,3"]
|===
| Level | Object

| (empty)
| Stack cleared of operands
|===

=== Description

link:/commands/references/arct/[`arct`] appends an arc of a circle to the current path, possibly preceded by a straight line segment. The arc is defined by a radius r and two tangent lines.

The tangent lines are:
1. From the current point (x0, y0) to (x1, y1)
2. From (x1, y1) to (x2, y2)

If the current point is undefined, link:/commands/references/arct/[`arct`] executes the [`nocurrentpoint`] error.

The center of the arc is located at distance r perpendicular to both tangent lines, within the inner angle between them. The arc begins at the first tangent point (xt1, yt1) on the first tangent line, and ends at the second tangent point (xt2, yt2) on the second tangent line.

Before constructing the arc, link:/commands/references/arct/[`arct`] adds a straight line from the current point to (xt1, yt1), unless those points are the same. The point (xt2, yt2) becomes the new current point.

If the two tangent lines are collinear, link:/commands/references/arct/[`arct`] merely appends a straight line from (x0, y0) to (x1, y1).

=== PostScript Level

*Level 2* and later

=== Examples

.Creating a rounded corner
[source,postscript]
----
newpath
100 100 moveto
200 100 200 200 20 arct   % Round corner at (200, 100)
200 200 lineto
stroke
----

.Drawing a rounded rectangle
[source,postscript]
----
/roundedRect {
  % x y width height radius
  /r exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  newpath
  x y r add moveto
  x y x w add y r arct
  x w add y x w add y h add r arct
  x w add y h add x y h add r arct
  x y h add x y r arct
  closepath
} def

50 50 200 150 25 roundedRect
stroke
----

.Creating smooth path transitions
[source,postscript]
----
newpath
50 200 moveto
100 200 100 100 30 arct    % Smooth transition at (100, 200)
100 100 200 100 30 arct    % Smooth transition at (100, 100)
200 100 lineto
stroke
----

=== Common Use Cases

==== Rounding Sharp Corners

[source,postscript]
----
/roundCorner {
  % x1 y1 x2 y2 radius
  arct
} def

newpath
100 100 moveto
200 100 200 200 15 roundCorner
200 200 100 200 15 roundCorner
100 200 100 100 15 roundCorner
closepath
stroke
----

==== Creating UI Elements

[source,postscript]
----
/roundedButton {
  % x y width height radius
  /r exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  newpath
  x y moveto
  x w add y x w add y h add r arct
  x w add y h add x y h add r arct
  x y h add x y r arct
  x y x w add y r arct
  closepath

  0.9 0.9 0.9 setrgbcolor fill
  0 0 0 setrgbcolor stroke
} def

100 100 150 40 10 roundedButton
----

==== Smooth Path Connections

[source,postscript]
----
/connectWithArc {
  % Creates smooth connection between line segments
  % x1 y1 x2 y2 x3 y3 radius
  /r exch def
  /y3 exch def /x3 exch def
  /y2 exch def /x2 exch def
  /y1 exch def /x1 exch def

  x1 y1 lineto
  x2 y2 x3 y3 r arct
} def

newpath
50 50 moveto
100 50 150 100 200 100 20 connectWithArc
stroke
----

=== Common Pitfalls

WARNING: *Requires Current Point* - link:/commands/references/arct/[`arct`] needs a current point to define the first tangent line.

[source,postscript]
----
newpath
100 100 200 100 20 arct    % Error: nocurrentpoint
----

WARNING: *Collinear Points* - If the three points are collinear, no arc is created, just a straight line to (x1, y1).

[source,postscript]
----
100 100 moveto
200 100 300 100 20 arct    % All on same line, no arc
----

WARNING: *Radius Too Large* - Very large radii relative to the angle may produce unexpected results or hit numerical limits.

TIP: *Perfect for UI Corners* - link:/commands/references/arct/[`arct`] is ideal for creating rounded corners in user interfaces and technical drawings where corners are defined by intersecting lines.

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`limitcheck`]
| Path becomes too complex for implementation

| [`nocurrentpoint`]
| Current path is empty (no current point defined)

| [`stackunderflow`]
| Fewer than 5 operands on stack

| [`typecheck`]
| Any operand is not a number

| [`undefinedresult`]
| Degenerate tangent configuration
|===

=== Implementation Notes

* Arc is circular in user space
* Non-uniform scaling produces elliptical results
* Internally converted to Bézier curves
* The connecting line from current point is automatic
* Tangent points are calculated but not returned (use link:/commands/references/arcto/[`arcto`] for that)

=== Performance Considerations

* Slightly more complex than link:/commands/references/arc/[`arc`] due to tangent calculations
* Very efficient for creating rounded corners
* Single operation replaces manual tangent point calculation

=== See Also

* link:/commands/references/arcto/[`arcto`] - Like arct but returns tangent points
* link:/commands/references/arc/[`arc`] - Counterclockwise circular arc
* link:/commands/references/arcn/[`arcn`] - Clockwise circular arc
* link:/commands/references/curveto/[`curveto`] - Bézier cubic curve
* link:/commands/references/lineto/[`lineto`] - Straight line segment