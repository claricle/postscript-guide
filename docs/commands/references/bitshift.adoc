---
layout: default
title: bitshift
parent: Command Reference
nav_order: 20
---
= bitshift

Shifts the binary representation of an integer left or right.

== Description

The `bitshift` operator pops two integers from the operand stack: an integer to shift and a shift count. It shifts the binary representation of int1 left by shift bits (if shift is positive) or right by -shift bits (if shift is negative). Bits shifted out are lost; bits shifted in are zero. Both operands must be integers, and the result is an integer.

This is a Level 1 operator, available in all PostScript implementations.

== Syntax

[source,postscript]
----
int1 shift bitshift int2
----

=== Stack Effect

.Before Execution
[cols="1,3"]
|===
|Position |Content

|Top
|`shift` (integer) - Number of bits to shift (positive = left, negative = right)

|Top-1
|`int1` (integer) - Integer to shift
|===

.After Execution
[cols="1,3"]
|===
|Position |Content

|Top
|`int2` (integer) - Shifted result
|===

== Parameters

`int1`:: The integer to shift
`shift`:: The number of bit positions to shift:
* Positive: shift left (multiply by 2^shift)
* Negative: shift right (divide by 2^-shift)
* Zero: no change

== Return Values

`int2`:: The shifted integer value

== Examples

=== Basic Usage

[source,postscript]
----
% Left shift (multiply by powers of 2)
7 3 bitshift   % → 56 (7 << 3 = 7 × 8)
1 5 bitshift   % → 32 (1 << 5 = 32)

% Right shift (divide by powers of 2)
142 -3 bitshift % → 17 (142 >> 3 = 142 ÷ 8)
64 -2 bitshift  % → 16 (64 >> 2 = 64 ÷ 4)

% No shift
10 0 bitshift   % → 10 (unchanged)
----

=== Multiplication by Powers of 2

[source,postscript]
----
% Faster than mul for powers of 2
10 1 bitshift   % → 20 (same as 10 2 mul)
10 2 bitshift   % → 40 (same as 10 4 mul)
10 3 bitshift   % → 80 (same as 10 8 mul)
----

=== Division by Powers of 2

[source,postscript]
----
% Faster than idiv for powers of 2
100 -1 bitshift % → 50 (same as 100 2 idiv)
100 -2 bitshift % → 25 (same as 100 4 idiv)
----

WARNING: Right shift only works correctly for positive integers.

=== Binary Bit Patterns

[source,postscript]
----
% Binary: 1010 (decimal 10)
10 1 bitshift   % → 20 (binary: 10100)
10 -1 bitshift  % → 5 (binary: 101)
----

== Related Commands

* link:/commands/references/mul/[`mul`] - Multiplication
* link:/commands/references/idiv/[`idiv`] - Integer division

== PostScript Level

*Available in*: PostScript Level 1 and higher

== Error Conditions

`stackunderflow`::
The operand stack contains fewer than two elements.

`typecheck`::
One or both operands are not integers.
+
[source,postscript]
----
7.5 3 bitshift % ERROR: typecheck
7 3.0 bitshift % ERROR: typecheck
----

== See Also

* link:/commands/references/[Arithmetic and Math] - All arithmetic operators