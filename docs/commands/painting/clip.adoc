---
layout: default
title: clip
parent: Painting
grand_parent: Command Reference
nav_order: 9
---

== clip

Intersects the current clipping path with the current path using the non-zero winding rule.

=== Syntax

----
- clip â†’ -
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| (empty)
| No operands required
|===

.After
[cols="1,3"]
|===
| Level | Object

| (empty)
| No results
|===

=== Description

xref:../clip.adoc[`clip`] intersects the inside of the current clipping path with the inside of the current path to produce a new, smaller current clipping path. The inside of the current path is determined by the normal PostScript non-zero winding number rule, while the inside of the current clipping path is determined by whatever rule was used at the time that path was created.

In general, xref:../clip.adoc[`clip`] produces a new path whose inside (according to the non-zero winding number rule) consists of all areas that are inside both of the original paths. The way this new path is constructed (the order of its segments, whether it self-intersects, etc.) is not specified.

xref:../clip.adoc[`clip`] treats an open subpath of the current path as though it were closed; it does not actually alter the path itself. It is permissible for the current path to be empty. The result of executing xref:../clip.adoc[`clip`] is always a non-empty clipping path, though it may enclose zero area.

Unlike xref:../fill.adoc[`fill`] and xref:../stroke.adoc[`stroke`], xref:../clip.adoc[`clip`] does not implicitly perform a xref:../path-construction/newpath.adoc[`newpath`] after it has finished using the current path.

=== PostScript Level

*Level 1* and later

=== Examples

.Simple rectangular clip
[source,postscript]
----
newpath
100 100 moveto
200 100 lineto
200 200 lineto
100 200 lineto
closepath
clip
newpath

% Graphics are now clipped to rectangle
50 50 moveto
250 250 lineto
stroke  % Only portion inside clip is visible
----

.Circular clip region
[source,postscript]
----
newpath
150 150 75 0 360 arc
closepath
clip
newpath

% Draw something that gets clipped
0 0 moveto
300 300 lineto
stroke
----

.Multiple clip operations
[source,postscript]
----
% First clip
newpath
50 50 moveto
250 50 lineto
250 250 lineto
50 250 lineto
closepath
clip
newpath

% Second clip (intersection)
newpath
100 100 150 0 360 arc
closepath
clip
newpath

% Only intersection of both clips is visible
----

=== Common Use Cases

==== Creating Masked Regions

[source,postscript]
----
gsave
  % Create mask
  newpath
  100 100 80 60 xref:../path-construction/arc.adoc[`arc`]
  closepath
  clip
  newpath

  % Draw content
  % Only visible within mask
  50 50 200 200 rectfill
grestore
----

==== Text as Clip Path

[source,postscript]
----
/Helvetica-Bold findfont 120 scalefont setfont

gsave
  newpath
  50 100 moveto
  (CLIP) true charpath
  clip
  newpath

  % Fill with pattern visible through text
  0 10 300 {
    0 exch moveto
    300 0 rlineto
    stroke
  } for
grestore
----

==== Vignette Effect

[source,postscript]
----
gsave
  % Circular vignette
  newpath
  150 150 100 0 360 arc
  closepath
  clip
  newpath

  % Draw image or content
  0 0 300 300 rectfill
grestore
----

=== Common Pitfalls

WARNING: *Clipping Can Only Shrink* - There is no way to enlarge the current clipping path except by xref:../graphics-state/grestore.adoc[`grestore`] or `initclip`.

[source,postscript]
----
% First clip
newpath
50 50 100 100 xref:../path-construction/arc.adoc[`arc`]
clip

% Can't expand beyond this
newpath
0 0 200 200 xref:../path-construction/arc.adoc[`arc`]
clip  % Still limited to intersection
----

WARNING: *Path Not Cleared After clip* - Unlike xref:../fill.adoc[`fill`] and xref:../stroke.adoc[`stroke`], the path remains after xref:../clip.adoc[`clip`].

[source,postscript]
----
newpath
100 100 moveto
200 200 lineto
clip
% Path still exists!
% Must explicitly clear
newpath
----

WARNING: *Open Paths Are Implicitly Closed* - Open subpaths are treated as closed for clipping.

[source,postscript]
----
newpath
100 100 moveto
200 100 lineto
200 200 lineto
% No closepath, but treated as closed
clip
newpath
----

TIP: *Always Use with gsave/grestore* - Bracket clip operations to restore the original clipping path:

[source,postscript]
----
gsave
  newpath
  100 100 50 0 360 arc
  clip
  newpath

  % Clipped drawing operations
  % ...
grestore
% Original clipping path restored
----

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`limitcheck`]
| Clipping path becomes too complex for implementation
|===

=== Implementation Notes

* The clipping path is maintained separately from the current path
* Clipping is applied during rendering of xref:../fill.adoc[`fill`], xref:../stroke.adoc[`stroke`], `show`, etc.
* Complex clipping paths may degrade rendering performance
* The clipping path can become arbitrarily complex through repeated clips
* Some implementations may have limits on clipping path complexity

=== Graphics State Interaction

The clipping path is part of the graphics state and is affected by:

* xref:../graphics-state/gsave.adoc[`gsave`] - Saves current clipping path
* xref:../graphics-state/grestore.adoc[`grestore`] - Restores saved clipping path
* `initclip` - Resets to device default
* `save`/`restore` - Saves/restores with VM state

The clipping path affects:

* xref:../fill.adoc[`fill`] and xref:../eofill.adoc[`eofill`] - Clip filled area
* xref:../stroke.adoc[`stroke`] - Clip stroked lines
* `show` and text operators - Clip character outlines
* `image` and `imagemask` - Clip images
* All painting operations

=== Winding Number Rule

xref:../clip.adoc[`clip`] uses the non-zero winding number rule:

. Draw a ray from the point in any direction
. Count crossings with path segments:
  * +1 for left-to-right crossings
  * -1 for right-to-left crossings
. If the total is non-zero, point is inside

This means path direction matters and can create solid fills from complex paths.

=== Best Practices

==== Always Pair with gsave/grestore

[source,postscript]
----
% Good practice
gsave
  newpath
  100 100 80 60 xref:../path-construction/arc.adoc[`arc`]
  closepath
  clip
  newpath

  % Clipped operations
  % ...
grestore
% Clip restored
----

==== Clear Path After clip

[source,postscript]
----
% Always clear path explicitly
newpath
100 100 moveto
200 200 lineto
closepath
clip
newpath  % Important!

% Now draw clipped content
----

==== Use Appropriate Winding Rule

[source,postscript]
----
% For simple clips, clip is fine
newpath
100 100 50 0 360 arc
closepath
clip
newpath

% For clips with holes, use eoclip
% (see eoclip documentation)
----

==== Limit Clipping Complexity

[source,postscript]
----
% Avoid excessive clip operations
% Bad: many successive clips
gsave
  clip1
  clip2
  clip3
  % ... many more clips
grestore

% Better: combine into single path when possible
gsave
  newpath
  % Construct complete clip path
  % ...
  clip
  newpath
grestore
----

=== Performance Considerations

* Simple rectangular clips are fastest
* Circular and polygonal clips are moderately fast
* Complex paths with many segments are slower
* Each additional clip operation adds overhead
* Very complex clipping paths may significantly impact rendering performance
* Consider simplifying clips when possible

=== Clipping Path Management

.Setting Initial Clip
[source,postscript]
----
% At document start
gsave
  newpath
  50 50 moveto
  550 50 lineto
  550 750 lineto
  50 750 lineto
  closepath
  clip
  newpath

  % All document content
  % ...
grestore
----

.Nested Clipping
[source,postscript]
----
gsave
  % Outer clip
  newpath
  50 50 200 200 xref:../path-construction/arc.adoc[`arc`]
  clip
  newpath

  gsave
    % Inner clip (intersection)
    newpath
    100 100 100 100 xref:../path-construction/arc.adoc[`arc`]
    clip
    newpath

    % Drawing here is clipped to intersection
    % ...
  grestore

  % Back to outer clip only
  % ...
grestore
% Original clip restored
----

=== See Also

* xref:../eoclip.adoc[`eoclip`] - Clip using even-odd rule
* xref:../clippath.adoc[`clippath`] - Get current clipping path
* `rectclip` - Clip to rectangles (Level 2)
* `initclip` - Reset to device default
* xref:../fill.adoc[`fill`] - Fill path
* xref:../stroke.adoc[`stroke`] - Stroke path
* xref:../graphics-state/gsave.adoc[`gsave`] - Save graphics state
* xref:../graphics-state/grestore.adoc[`grestore`] - Restore graphics state
* xref:../path-construction/newpath.adoc[`newpath`] - Clear current path
* xref:../path-construction/closepath.adoc[`closepath`] - Close current subpath