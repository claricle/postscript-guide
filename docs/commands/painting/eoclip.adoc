---
layout: default
title: eoclip
parent: Painting
grand_parent: Command Reference
nav_order: 10
---

== eoclip

Intersects the current clipping path with the current path using the even-odd rule.

=== Syntax

----
- eoclip â†’ -
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| (empty)
| No operands required
|===

.After
[cols="1,3"]
|===
| Level | Object

| (empty)
| No results
|===

=== Description

[`eoclip`](eoclip.adoc) intersects the inside of the current clipping path with the inside of the current path to produce a new, smaller current clipping path. The inside of the current path is determined by the even-odd rule, while the inside of the current clipping path is determined by whatever rule was used at the time that path was created.

Except for the choice of insideness rule, the behavior of [`eoclip`](eoclip.adoc) is identical to that of xref:clip.adoc[`clip`].

The even-odd rule determines whether a point is inside by counting path crossings: an odd number means inside, an even number means outside. This rule is particularly useful for creating clipping regions with holes.

=== PostScript Level

*Level 1* and later

=== Examples

.Simple circular clip with even-odd
[source,postscript]
----
newpath
150 150 75 0 360 arc
closepath
eoclip
newpath

% Graphics clipped to circle
0 0 moveto
300 300 lineto
stroke
----

.Creating a frame (clip with hole)
[source,postscript]
----
gsave
  newpath
  % Outer rectangle
  50 50 moveto
  250 50 lineto
  250 250 lineto
  50 250 lineto
  closepath

  % Inner rectangle (creates hole)
  100 100 moveto
  200 100 lineto
  200 200 lineto
  100 200 lineto
  closepath

  eoclip
  newpath

  % Draw something - only visible in frame
  0 0 300 300 rectfill
grestore
----

.Donut-shaped clip region
[source,postscript]
----
gsave
  newpath
  150 150 100 0 360 arc
  closepath
  150 150 50 0 360 arc
  closepath

  eoclip
  newpath

  % Visible only in ring
  0 0 300 300 rectfill
grestore
----

=== Common Use Cases

==== Creating Windows or Frames

[source,postscript]
----
/windowClip {
  % Create window frame with 4 panes
  gsave
    newpath
    % Outer frame
    10 10 moveto
    290 10 lineto
    290 290 lineto
    10 290 lineto
    closepath

    % Four window panes (holes)
    20 20 moveto
    140 20 lineto
    140 140 lineto
    20 140 lineto
    closepath

    160 20 moveto
    280 20 lineto
    280 140 lineto
    160 140 lineto
    closepath

    20 160 moveto
    140 160 lineto
    140 280 lineto
    20 280 lineto
    closepath

    160 160 moveto
    280 160 lineto
    280 280 lineto
    160 280 lineto
    closepath

    eoclip
    newpath

    % Draw window content
    % ...
  grestore
} def
----

==== Text Knockout Effect

[source,postscript]
----
/Helvetica-Bold findfont 120 scalefont setfont

gsave
  newpath
  % Background rectangle
  0 0 moveto
  400 0 lineto
  400 200 lineto
  0 200 lineto
  closepath

  % Text as hole
  50 50 moveto
  (KNOCKOUT) true charpath

  eoclip
  newpath

  % Fill everything except text
  0 0 400 200 rectfill
grestore
----

==== Concentric Rings

[source,postscript]
----
gsave
  newpath
  150 150 100 0 360 arc closepath
  150 150 75 0 360 arc closepath
  150 150 50 0 360 arc closepath
  150 150 25 0 360 arc closepath

  eoclip
  newpath

  % Creates ring pattern
  0.5 setgray
  0 0 300 300 rectfill
grestore
----

=== Common Pitfalls

WARNING: *Different Results from clip* - The even-odd rule produces different results than the non-zero winding number rule used by xref:clip.adoc[`clip`].

[source,postscript]
----
% Same path, different clipping rules
newpath
50 50 moveto
250 50 lineto
250 250 lineto
50 250 lineto
closepath

100 100 moveto
200 100 lineto
200 200 lineto
100 200 lineto
closepath

gsave
  clip      % Non-zero: both rectangles clipped
  newpath
  0 0 300 300 rectfill
grestore

gsave
  eoclip    % Even-odd: inner is a hole
  newpath
  0 0 300 300 rectfill
grestore
----

WARNING: *Path Direction Irrelevant* - Unlike xref:clip.adoc[`clip`], the direction paths are drawn doesn't matter with [`eoclip`](eoclip.adoc).

[source,postscript]
----
% Clockwise vs counterclockwise doesn't matter
newpath
150 150 100 0 360 arc closepath  % Outer
150 150 50 0 360 arc closepath   % Inner

eoclip  % Always creates hole regardless of direction
newpath
----

WARNING: *Path Not Cleared* - Like xref:clip.adoc[`clip`], [`eoclip`](eoclip.adoc) does not clear the path.

[source,postscript]
----
newpath
100 100 moveto
200 200 lineto
eoclip
% Path still exists - must clear explicitly
newpath
----

TIP: *Use for Predictable Holes* - [`eoclip`](eoclip.adoc) is ideal for creating holes regardless of path direction:

[source,postscript]
----
gsave
  newpath
  % Any direction creates same hole
  outer_path
  inner_path  % Direction doesn't matter

  eoclip
  newpath

  % Draw clipped content
  % ...
grestore
----

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`limitcheck`]
| Clipping path becomes too complex for implementation
|===

=== Implementation Notes

* The even-odd rule counts path crossings to determine inside/outside
* Path direction does not affect the clipping result
* Multiple overlapping subpaths create alternating clipped and unclipped regions
* The algorithm is generally simpler than the non-zero winding number rule
* Complex clipping paths may impact rendering performance

=== Even-Odd Rule Details

The even-odd rule for [`eoclip`](eoclip.adoc):

. Draw a ray from the point in any direction
. Count the number of path segment crossings
. If the count is odd, the point is inside
. If the count is even, the point is outside

This produces alternating inside/outside regions for overlapping paths, making it perfect for creating holes.

=== Best Practices

==== Always Use with gsave/grestore

[source,postscript]
----
gsave
  newpath
  % Outer boundary
  50 50 moveto
  250 50 lineto
  250 250 lineto
  50 250 lineto
  closepath

  % Inner hole
  100 100 moveto
  200 100 lineto
  200 200 lineto
  100 200 lineto
  closepath

  eoclip
  newpath

  % Clipped operations
  % ...
grestore
% Clip restored
----

==== Clear Path After eoclip

[source,postscript]
----
newpath
% Construct clipping path
% ...
eoclip
newpath  % Important!

% Draw clipped content
----

==== Use for Shapes with Holes

[source,postscript]
----
% Good: creates predictable holes
gsave
  newpath
  % Border
  0 0 200 200 xref:../path-construction/arc.adoc[`arc`] closepath
  % Holes (any direction works)
  50 50 30 30 xref:../path-construction/arc.adoc[`arc`] closepath
  150 50 30 30 xref:../path-construction/arc.adoc[`arc`] closepath
  50 150 30 30 xref:../path-construction/arc.adoc[`arc`] closepath
  150 150 30 30 xref:../path-construction/arc.adoc[`arc`] closepath

  eoclip
  newpath

  % Draw
  % ...
grestore
----

=== Comparing Even-Odd vs Non-Zero Winding

.Even-Odd Rule ([`eoclip`](eoclip.adoc))
* Counts crossings: odd = inside, even = outside
* Path direction doesn't matter
* Simple to understand and predict
* Natural for regions with holes
* Alternating pattern for overlapping paths

.Non-Zero Winding Rule (xref:clip.adoc[`clip`])
* Counts direction of crossings
* Path direction matters
* More complex but more flexible
* Can create solid clips from complex paths
* Direction-dependent results

=== Performance Considerations

* Even-odd rule calculation is generally faster than non-zero winding
* Number of subpaths affects performance more than their complexity
* Very large numbers of crossings may slow processing
* Simple convex clipping regions are fastest
* Each clip operation adds overhead

=== Advanced Techniques

==== Multiple Holes

[source,postscript]
----
/multiHoleClip {
  gsave
    newpath
    % Outer boundary
    10 10 moveto
    290 10 lineto
    290 290 lineto
    10 290 lineto
    closepath

    % Add multiple holes
    20 {
      rand 280 mod 10 add    % x
      rand 280 mod 10 add    % y
      rand 20 mod 5 add      % radius
      0 360 arc closepath
    } repeat

    eoclip
    newpath

    % Draw through holes
    % ...
  grestore
} def
----

==== Text with Counters

[source,postscript]
----
/Helvetica-Bold findfont 120 scalefont setfont

gsave
  newpath
  100 100 moveto
  (HOLES) true charpath

  eoclip
  newpath

  % Pattern visible through letters and counters
  0 5 300 {
    dup
    0 exch moveto
    300 exch lineto
    stroke
  } for
grestore
----

=== See Also

* xref:clip.adoc[`clip`] - Clip using non-zero winding rule
* xref:clippath.adoc[`clippath`] - Get current clipping path
* xref:eofill.adoc[`eofill`] - Fill using even-odd rule
* `rectclip` - Clip to rectangles (Level 2)
* `initclip` - Reset to device default
* xref:../graphics-state/gsave.adoc[`gsave`] - Save graphics state
* xref:../graphics-state/grestore.adoc[`grestore`] - Restore graphics state
* xref:../path-construction/newpath.adoc[`newpath`] - Clear current path
* xref:../path-construction/closepath.adoc[`closepath`] - Close current subpath