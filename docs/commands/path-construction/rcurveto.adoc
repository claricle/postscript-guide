---
layout: default
title: rcurveto
parent: Path Construction
grand_parent: Command Reference
nav_order: 6
---

== rcurveto

Adds a Bézier cubic curve segment to the current path using relative coordinates.

=== Syntax

----
dx1 dy1 dx2 dy2 dx3 dy3 rcurveto → -
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| 5
| `dy3` (number - endpoint y displacement)

| 4
| `dx3` (number - endpoint x displacement)

| 3
| `dy2` (number - second control point y displacement)

| 2
| `dx2` (number - second control point x displacement)

| 1
| `dy1` (number - first control point y displacement)

| 0
| `dx1` (number - first control point x displacement)
|===

.After
[cols="1,3"]
|===
| Level | Object

| (empty)
| Stack cleared of operands
|===

=== Description

xref:../rcurveto.adoc[`rcurveto`] (relative curveto) adds a Bézier cubic section to the current path in the same manner as xref:../curveto.adoc[`curveto`]. However, the three number pairs are interpreted as displacements relative to the current point (x0, y0) rather than as absolute coordinates.

That is, xref:../rcurveto.adoc[`rcurveto`] constructs a curve from (x0, y0) to (x0+dx3, y0+dy3), using (x0+dx1, y0+dy1) and (x0+dx2, y0+dy2) as Bézier control points.

If the current point is undefined because the current path is empty, xref:../rcurveto.adoc[`rcurveto`] executes the [`nocurrentpoint`] error.

=== PostScript Level

*Level 1* and later

=== Examples

.Simple relative curve
[source,postscript]
----
newpath
100 100 moveto
50 100 150 100 200 0 rcurveto    % Curve relative to (100,100)
stroke
----

.Creating a smooth wavy line
[source,postscript]
----
newpath
50 150 moveto
5 {
  40 -50 80 -50 120 0 rcurveto   % Wave up
  40 50 80 50 120 0 rcurveto     % Wave down
} repeat
stroke
----

.Drawing connected S-curves
[source,postscript]
----
newpath
100 200 moveto
3 {
  30 -60 60 -60 90 0 rcurveto    % S-curve
} repeat
stroke
----

=== Common Use Cases

==== Creating Repeating Patterns

[source,postscript]
----
/drawWave {
  % amplitude wavelength count
  /n exch def
  /wl exch def
  /amp exch def

  n {
    wl 4 div amp
    wl 2 div 0
    wl 4 mul 3 div amp neg
    wl 0
    rcurveto
  } repeat
} def

newpath
50 150 moveto
30 100 5 drawWave
stroke
----

==== Building Complex Curves Incrementally

[source,postscript]
----
/spiralSegment {
  % Draws one segment of a spiral
  /angle exch def
  /radius exch def

  radius 3 div 0
  radius 2 mul 3 div radius 3 div
  radius radius 3 div
  rcurveto
} def

newpath
200 200 moveto
12 {
  20 30 spiralSegment
  30 rotate
} repeat
stroke
----

==== Creating Smooth Font-Like Shapes

[source,postscript]
----
/drawScript_e {
  % Draws a script 'e' using relative curves
  newpath
  0 20 moveto

  15 0 25 10 25 25 rcurveto       % Right curve
  0 10 -5 15 -15 15 rcurveto      % Top
  -15 0 -25 -10 -25 -25 rcurveto  % Left curve
  0 -5 2 -8 8 -8 rcurveto         % Bottom loop
  closepath
} def

100 100 translate
drawScript_e
fill
----

=== Common Pitfalls

WARNING: *Requires Current Point* - xref:../rcurveto.adoc[`rcurveto`] needs a current point. Use xref:../moveto.adoc[`moveto`] first.

[source,postscript]
----
newpath
50 50 100 50 150 0 rcurveto      % Error: nocurrentpoint
----

WARNING: *All Coordinates Are Relative* - Unlike xref:../curveto.adoc[`curveto`], all six parameters are displacements from the current point, not absolute positions.

[source,postscript]
----
100 100 moveto
50 50 100 100 150 150 rcurveto   % NOT absolute coordinates!
% Actually draws to (250, 250), not (150, 150)
----

TIP: *Ideal for Patterns* - xref:../rcurveto.adoc[`rcurveto`] excels at creating repeating curved patterns where each curve relates to the previous position.

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`limitcheck`]
| Path becomes too complex for implementation

| [`nocurrentpoint`]
| Current path is empty (no current point defined)

| [`stackunderflow`]
| Fewer than 6 operands on stack

| [`typecheck`]
| Any operand is not a number

| [`undefinedresult`]
| Numeric overflow in coordinate calculation
|===

=== Implementation Notes

* All displacements are in user space
* Control points are calculated relative to current point before CTM transformation
* Negative displacements move in opposite directions
* More convenient for iterative curve construction
* Each curve segment's endpoint becomes the reference for the next

=== Performance Considerations

* No performance difference from xref:../curveto.adoc[`curveto`]
* Reduces coordinate calculation in code
* More maintainable for relative patterns
* Can accumulate rounding errors in long sequences

=== See Also

* xref:../curveto.adoc[`curveto`] - Absolute curveto
* xref:../rlineto.adoc[`rlineto`] - Relative lineto
* xref:../rmoveto.adoc[`rmoveto`] - Relative moveto
* xref:../arc.adoc[`arc`] - Draw circular arc
* xref:../currentpoint.adoc[`currentpoint`] - Get current point