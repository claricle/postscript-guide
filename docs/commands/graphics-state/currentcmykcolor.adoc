---
layout: default
title: currentcmykcolor
parent: Graphics State
grand_parent: Command Reference
nav_order: 22
---

== currentcmykcolor

Returns current color as CMYK values.

=== Syntax

----
– currentcmykcolor → cyan magenta yellow black
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| (empty)
| –
|===

.After
[cols="1,3"]
|===
| Level | Object

| 3
| `cyan` (0.0 to 1.0)

| 2
| `magenta` (0.0 to 1.0)

| 1
| `yellow` (0.0 to 1.0)

| 0
| `black` (0.0 to 1.0)
|===

=== Description

[`currentcmykcolor`](currentcmykcolor.adoc) returns the current color in the graphics state according to the cyan-magenta-yellow-black color space.

* If the current color space is **DeviceCMYK**, [`currentcmykcolor`](currentcmykcolor.adoc) returns the color values most recently specified by [`setcmykcolor`](setcmykcolor.adoc) or [`setcolor`].
* If the current color space is **DeviceRGB** or **DeviceGray**, [`currentcmykcolor`](currentcmykcolor.adoc) converts the current color to CMYK.
* For any other color space, [`currentcmykcolor`](currentcmykcolor.adoc) returns **0.0 0.0 0.0 1.0** (black).

Each returned value is in the range 0.0 (no ink) to 1.0 (full ink coverage).

=== PostScript Level

*Level 2* and later

=== Examples

.Querying current CMYK color
[source,postscript]
----
0 1 1 0 setcmykcolor  % Cyan
currentcmykcolor
% Stack: 0.0 1.0 1.0 0.0
----

.Saving and restoring color
[source,postscript]
----
currentcmykcolor            % Save current
/black exch def
/yellow exch def
/magenta exch def
/cyan exch def

1 0 0 0 setcmykcolor        % Change to cyan
drawShape

cyan magenta yellow black setcmykcolor  % Restore
----

.Converting from RGB
[source,postscript]
----
1 0 0 setrgbcolor  % Red
currentcmykcolor
% Stack: 0.0 1.0 1.0 0.0 (approximately)
----

.Adjusting black component
[source,postscript]
----
currentcmykcolor
0.5 add                % Increase black
4 1 roll               % Reorder
setcmykcolor
----

=== Common Use Cases

==== Print Production Color Management

[source,postscript]
----
/SaveCMYK {
  currentcmykcolor
  /savedBlack exch def
  /savedYellow exch def
  /savedMagenta exch def
  /savedCyan exch def
} def

/RestoreCMYK {
  savedCyan savedMagenta savedYellow savedBlack
  setcmykcolor
} def
----

==== Undercolor Removal Adjustment

[source,postscript]
----
/ApplyUCR {
  currentcmykcolor
  % Get minimum of CMY
  3 copy
  2 copy lt { exch } if pop
  2 copy lt { exch } if pop
  % Add to black, reduce CMY
  dup 4 1 roll add
  4 1 roll exch 3 -1 roll sub
  3 1 roll exch 3 -1 roll sub
  3 1 roll exch 3 -1 roll sub
  3 1 roll
  setcmykcolor
} def
----

==== Rich Black Creation

[source,postscript]
----
/SetRichBlack {
  % Create rich black (C+M+Y+K)
  currentcmykcolor
  pop  % Remove old black
  0.5  % New black value
  exch 0.3 add  % Add cyan
  exch 0.3 add  % Add magenta
  exch 0.3 add  % Add yellow
  3 -1 roll
  setcmykcolor
} def
----

==== Spot Color Simulation

[source,postscript]
----
/SimulateSpotColor {
  % Convert current color and ensure no RGB
  currentcmykcolor
  4 array astore /cmykColor exch def
  cmykColor aload pop setcmykcolor
} def
----

=== Common Pitfalls

WARNING: *Color Space Conversion* - RGB to CMYK conversion is not exact.

[source,postscript]
----
1 0 0 setrgbcolor      % Pure red in RGB
currentcmykcolor       % ~0 1 1 0 in CMYK
setcmykcolor
currentrgbcolor        % May not be exactly 1 0 0
----

WARNING: *Returns Black for Unknown Spaces* - Pattern and other spaces return 0 0 0 1.

[source,postscript]
----
/Pattern setcolorspace
myPattern setcolor
currentcmykcolor        % Returns 0 0 0 1
----

WARNING: *Stack Order* - CMYK order: cyan at level 3, black at level 0.

[source,postscript]
----
currentcmykcolor
% Stack (bottom to top): cyan magenta yellow black
% Pop order: black, yellow, magenta, cyan
----

WARNING: *Level 2 Only* - Not available in Level 1 interpreters.

[source,postscript]
----
/languagelevel where {
  pop languagelevel 2 ge {
    currentcmykcolor
  } {
    % Level 1 - no CMYK support
  } ifelse
} if
----

TIP: *Use Array for Storage* - Simplifies CMYK color management.

[source,postscript]
----
[ currentcmykcolor ] /myColor exch def
myColor aload pop setcmykcolor
----

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`stackoverflow`]
| Fewer than 4 free stack positions

| [`undefined`]
| Level 1 interpreter (operator not defined)
|===

=== Implementation Notes

* Level 2 operator
* Fast query operation
* No modification to graphics state
* Values always in range 0.0 to 1.0
* Conversion algorithms device-dependent
* Ideal for print production workflows

=== Color Conversion

When converting from other color spaces:

.Gray to CMYK
----
cyan = magenta = yellow = 0.0
black = 1 - grayValue
----

.RGB to CMYK (simplified)
----
cyan    = 1 - red
magenta = 1 - green
yellow  = 1 - blue
black   = min(cyan, magenta, yellow)
cyan    = cyan - black
magenta = magenta - black
yellow  = yellow - black
----

.Other Spaces
----
cyan = magenta = yellow = 0.0
black = 1.0
----

=== CMYK Color Model

The CMYK color model is **subtractive**:

[source]
----
Cyan    + Magenta = Blue
Cyan    + Yellow  = Green
Magenta + Yellow  = Red
C + M + Y         = Dark gray
C + M + Y + K     = Rich black
No components     = White (paper)
----

=== See Also

* xref:setcmykcolor.adoc[`setcmykcolor`] - Set CMYK color (Level 2)
* xref:currentrgbcolor.adoc[`currentrgbcolor`] - Get RGB color
* xref:currentgray.adoc[`currentgray`] - Get gray value
* xref:currenthsbcolor.adoc[`currenthsbcolor`] - Get HSB color
