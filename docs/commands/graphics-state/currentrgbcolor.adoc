---
layout: default
title: currentrgbcolor
parent: Graphics State
grand_parent: Command Reference
nav_order: 21
---

== currentrgbcolor

Returns current color as RGB values.

=== Syntax

----
– currentrgbcolor → red green blue
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| (empty)
| –
|===

.After
[cols="1,3"]
|===
| Level | Object

| 2
| `red` (0.0 to 1.0)

| 1
| `green` (0.0 to 1.0)

| 0
| `blue` (0.0 to 1.0)
|===

=== Description

link:currentrgbcolor.adoc[`currentrgbcolor`] returns the current color in the graphics state according to the red-green-blue color model.

* If the current color space is **DeviceRGB**, link:currentrgbcolor.adoc[`currentrgbcolor`] returns the color values most recently specified to link:setrgbcolor.adoc[`setrgbcolor`] or [`setcolor`] (or transformed values specified to link:sethsbcolor.adoc)[`sethsbcolor`].
* If the current color space is **DeviceGray** or **DeviceCMYK**, link:currentrgbcolor.adoc[`currentrgbcolor`] converts the current color to RGB.
* For any other color space, link:currentrgbcolor.adoc[`currentrgbcolor`] returns **0.0 0.0 0.0** (black).

Each returned value is in the range 0.0 (no intensity) to 1.0 (full intensity).

=== PostScript Level

*Level 1* and later

=== Examples

.Querying current RGB color
[source,postscript]
----
1 0 0 setrgbcolor  % Red
currentrgbcolor
% Stack: 1.0 0.0 0.0
----

.Saving and restoring color
[source,postscript]
----
currentrgbcolor           % Save current
/blue exch def
/green exch def
/red exch def

0.5 0.5 0 setrgbcolor     % Change to olive
drawShape

red green blue setrgbcolor % Restore
----

.Converting from gray
[source,postscript]
----
0.5 setgray
currentrgbcolor
% Stack: 0.5 0.5 0.5
----

.Color manipulation
[source,postscript]
----
currentrgbcolor
3 -1 roll              % Rotate R to top
0.5 mul                % Darken red
3 1 roll               % Rotate back
setrgbcolor
----

=== Common Use Cases

==== Color State Preservation

[source,postscript]
----
/SaveColor {
  currentrgbcolor
  /savedBlue exch def
  /savedGreen exch def
  /savedRed exch def
} def

/RestoreColor {
  savedRed savedGreen savedBlue setrgbcolor
} def
----

==== Color Modification

[source,postscript]
----
/DarkenColor {
  currentrgbcolor
  0.5 mul 3 1 roll
  0.5 mul 3 1 roll
  0.5 mul 3 1 roll
  setrgbcolor
} def
----

==== Complementary Colors

[source,postscript]
----
/SetComplementary {
  currentrgbcolor
  1 exch sub 3 1 roll
  1 exch sub 3 1 roll
  1 exch sub 3 1 roll
  setrgbcolor
} def
----

==== Color Component Access

[source,postscript]
----
/GetRedComponent {
  currentrgbcolor
  pop pop  % Remove green and blue
} def

/GetGreenComponent {
  currentrgbcolor
  3 1 roll pop pop  % Remove red and blue
} def
----

=== Common Pitfalls

WARNING: *Color Space Conversion* - Converting from CMYK to RGB may not preserve exact colors.

[source,postscript]
----
0 1 1 0 setcmykcolor  % Cyan in CMYK
currentrgbcolor       % Converted to RGB
setrgbcolor           % Now in RGB space
% May not match original cyan exactly
----

WARNING: *Returns Black for Unknown Spaces* - Pattern and other color spaces return 0 0 0.

[source,postscript]
----
/Pattern setcolorspace
myPattern setcolor
currentrgbcolor        % Returns 0 0 0
----

WARNING: *Stack Order* - Remember RGB order: red at level 2, blue at level 0.

[source,postscript]
----
currentrgbcolor
% Stack (bottom to top): red green blue
% Pop order: blue, green, red
----

TIP: *Use Array for Storage* - Simplifies color management.

[source,postscript]
----
[ currentrgbcolor ] /myColor exch def
myColor aload pop setrgbcolor
----

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`stackoverflow`]
| Fewer than 3 free stack positions
|===

=== Implementation Notes

* Fast query operation
* No modification to graphics state
* Values always in range 0.0 to 1.0
* Conversion preserves visual appearance
* Widely supported (Level 1)

=== Color Conversion

When converting from other color spaces:

.Gray to RGB
----
red = green = blue = grayValue
----

.CMYK to RGB (simplified)
----
red   = (1 - cyan) × (1 - black)
green = (1 - magenta) × (1 - black)
blue  = (1 - yellow) × (1 - black)
----

.HSB to RGB
----
(Internal conversion - HSB is just RGB entry method)
----

.Other Spaces
----
red = green = blue = 0.0
----

=== RGB Color Model

The RGB color model is **additive**:

[source]
----
Red   + Green = Yellow
Red   + Blue  = Magenta
Green + Blue  = Cyan
R + G + B     = White
No components = Black
----

=== See Also

* xref:../setrgbcolor.adoc[`setrgbcolor`] - Set RGB color
* xref:../currentgray.adoc[`currentgray`] - Get gray value
* xref:../currentcmykcolor.adoc[`currentcmykcolor`] - Get CMYK color (Level 2)
* xref:../currenthsbcolor.adoc[`currenthsbcolor`] - Get HSB color
