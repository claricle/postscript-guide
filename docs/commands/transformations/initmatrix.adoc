---
layout: default
title: initmatrix
parent: Coordinate Transformations
grand_parent: Command Reference
nav_order: 10
---

== initmatrix

Resets the current transformation matrix to the device default.

=== Syntax

----
- initmatrix â†’ -
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| (empty)
| No operands required
|===

.After
[cols="1,3"]
|===
| Level | Object

| (empty)
| No results
|===

=== Description

[`initmatrix`](initmatrix.adoc) sets the current transformation matrix (CTM) to the default matrix for the current output device. This matrix transforms the default user coordinate system to device space.

For page-oriented devices, the default matrix is initially established by the `setpagedevice` operator.

This is equivalent to:

[source,postscript]
----
matrix defaultmatrix setmatrix
----

WARNING: There are few situations in which a PostScript program should execute [`initmatrix`](initmatrix.adoc) explicitly. A page description that executes [`initmatrix`](initmatrix.adoc) usually produces incorrect results if embedded within another, composite page.

=== PostScript Level

*Level 1* and later

=== Examples

.Resetting to default
[source,postscript]
----
% After many transformations
100 100 translate
2 2 scale
45 rotate

initmatrix  % Back to device default
----

.Device setup
[source,postscript]
----
% In device initialization
initmatrix
72 72 scale  % Set up 1-inch units
----

=== Common Use Cases

==== Resetting Coordinate System

[source,postscript]
----
% Start fresh
initmatrix
% Now at device default transformation
----

==== Absolute Positioning

[source,postscript]
----
% Position independent of current transformation
gsave
  initmatrix
  300 400 moveto  % Absolute device coordinates
  (Text) show
grestore
----

==== Device Initialization

[source,postscript]
----
% Part of page setup
initmatrix
initgraphics  % Reset other graphics parameters too
----

=== Common Pitfalls

WARNING: *Breaks Nested Transformations* - [`initmatrix`](initmatrix.adoc) ignores all previous transformations.

[source,postscript]
----
/drawBox {
  newpath
  0 0 100 100 rectfill
} def

100 100 translate
2 2 scale
initmatrix      % Destroys the translate and scale!
drawBox         % Box appears at device origin, normal size
----

WARNING: *Not for Typical Programs* - Normal PostScript programs should not use [`initmatrix`](initmatrix.adoc).

[source,postscript]
----
% Don't do this in normal programs:
initmatrix

% Use gsave/grestore instead:
gsave
  % ... transformations ...
grestore
----

TIP: *Use gsave/grestore* - For temporary transformations, use xref:../graphics-state/gsave.adoc[`gsave`]/xref:../graphics-state/grestore.adoc[`grestore`]:

[source,postscript]
----
% Better than initmatrix:
gsave
  100 100 translate
  % ... draw content ...
grestore
% Original transformation restored
----

TIP: *Part of initgraphics* - [`initmatrix`](initmatrix.adoc) is one component of `initgraphics`:

[source,postscript]
----
% initgraphics is equivalent to:
initmatrix
newpath
initclip
1 setlinewidth
0 setlinecap
0 setlinejoin
[] 0 setdash
0 setgray
10 setmiterlimit
----

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| (none)
| [`initmatrix`](initmatrix.adoc) cannot fail
|===

=== Implementation Notes

* The default matrix is device-dependent
* For page devices, it's established during page setup
* The transformation is instantaneous
* No previous CTM state is preserved (unlike xref:../graphics-state/grestore.adoc[`grestore`])

=== Default Matrix Characteristics

For typical page-oriented devices:

----
[72 0 0 -72 0 height]
----

Where:

* 72 = points per inch (horizontal)
* -72 = points per inch (vertical, inverted)
* height = page height in points

This establishes:

* 1 unit = 1 point (1/72 inch)
* Origin at top-left corner
* Y-axis pointing down
* X-axis pointing right

=== Relationship to Other Operators

[source,postscript]
----
% These are equivalent:
initmatrix

matrix defaultmatrix setmatrix
----

[`initmatrix`](initmatrix.adoc) is part of:

[source,postscript]
----
initgraphics  % Calls initmatrix plus resets other parameters
----

=== When to Use initmatrix

Valid use cases (rare):

1. **Device Setup**: Initial coordinate system configuration
2. **Absolute Positioning**: When you need device coordinates
3. **Error Recovery**: Recovering from unknown transformation state

Invalid use cases (common mistakes):

1. **Normal Drawing**: Use xref:../graphics-state/gsave.adoc[`gsave`]/xref:../graphics-state/grestore.adoc[`grestore`] instead
2. **Resetting After Transform**: Use xref:../graphics-state/grestore.adoc[`grestore`] instead
3. **Embedded Pages**: Will break composition

=== Example of Proper Use

[source,postscript]
----
% Valid: Absolute positioning for debugging
/debugMark {
  gsave
    initmatrix  % Work in device coordinates
    72 72 translate  % 1 inch from corner
    newpath
    0 0 5 0 360 arc
    fill
  grestore
} def
----

=== See Also

* xref:defaultmatrix.adoc[`defaultmatrix`] - Get device default matrix
* xref:currentmatrix.adoc[`currentmatrix`] - Get current CTM
* xref:setmatrix.adoc[`setmatrix`] - Set CTM explicitly
* xref:../graphics-state/gsave.adoc[`gsave`] - Save graphics state
* xref:../graphics-state/grestore.adoc[`grestore`] - Restore graphics state