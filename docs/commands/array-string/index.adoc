---
layout: default
title: Array and String Operations
parent: Commands
nav_order: 3
---

== Array and String Operations

Array and string operations provide the foundation for data structure manipulation in PostScript. These commands enable creating, accessing, modifying, and iterating over arrays and strings, which are the primary composite data types in PostScript.

== Overview

Arrays and strings in PostScript share many operational characteristics:

* Both are indexed collections (0-based indexing)
* Both support element access via link:/docs/commands/references/get/[`get`] and link:/docs/commands/references/put/[`put`]
* Both can have subsequences extracted via link:/docs/commands/references/getinterval/[`getinterval`]
* Both can be iterated over using link:/docs/commands/references/forall/[`forall`]
* Both have a link:/docs/commands/references/length/[`length`] that can be queried

However, they differ in important ways:

* Arrays contain arbitrary PostScript objects; strings contain only integers (0-255)
* Arrays can be literal or executable; strings are always literal unless explicitly converted
* Strings are mutable; packed arrays are read-only

== Array Categories

=== Array Creation and Manipulation

[cols="1,3"]
|===
| Command | Description

| link:/docs/commands/references/array/[`array`]
| Create a new array of specified length

| link:/docs/commands/references/brackets/[`[`]
| Begin array construction (mark)

| link:/docs/commands/references/brackets/[`]`]
| End array construction

| link:/docs/commands/references/aload/[`aload`]
| Load all array elements onto stack

| link:/docs/commands/references/astore/[`astore`]
| Store stack elements into array

| link:/docs/commands/references/packedarray/[`packedarray`]
| Create read-only packed array (Level 2)
|===

=== Element Access

[cols="1,3"]
|===
| Command | Description

| link:/docs/commands/references/get/[`get`]
| Get single element from array/string

| link:/docs/commands/references/put/[`put`]
| Put value into array/string element

| link:/docs/commands/references/getinterval/[`getinterval`]
| Extract subarray or substring

| link:/docs/commands/references/putinterval/[`putinterval`]
| Insert array/string into another

| link:/docs/commands/references/length/[`length`]
| Get length of array/string
|===

=== Iteration

[cols="1,3"]
|===
| Command | Description

| link:/docs/commands/references/forall/[`forall`]
| Execute procedure for each element
|===

== String Categories

=== String Creation and Manipulation

[cols="1,3"]
|===
| Command | Description

| link:/docs/commands/references/string/[`string`]
| Create new string of specified length

| link:/docs/commands/references/anchorsearch/[`anchorsearch`]
| Search for prefix in string

| link:/docs/commands/references/search/[`search`]
| Search for substring

| link:/docs/commands/references/token/[`token`]
| Parse next token from string/file
|===

=== Type Conversion

[cols="1,3"]
|===
| Command | Description

| link:/docs/commands/references/cvs/[`cvs`]
| Convert any object to string representation

| link:/docs/commands/references/cvn/[`cvn`]
| Convert string to name

| link:/docs/commands/references/cvr/[`cvr`]
| Convert to real number

| link:/docs/commands/references/cvi/[`cvi`]
| Convert to integer

| link:/docs/commands/references/cvlit/[`cvlit`]
| Convert to literal attribute

| link:/docs/commands/references/cvx/[`cvx`]
| Convert to executable attribute

| link:/docs/commands/references/type/[`type`]
| Get object type as name
|===

=== Access Checking

[cols="1,3"]
|===
| Command | Description

| link:/docs/commands/references/xcheck/[`xcheck`]
| Check if object is executable

| link:/docs/commands/references/rcheck/[`rcheck`]
| Check if object is readable

| link:/docs/commands/references/wcheck/[`wcheck`]
| Check if object is writable
|===

== Common Patterns

=== Array Construction

The most common way to create arrays uses the bracket syntax:

[source,postscript]
----
[ 1 2 3 ]           % Creates [1 2 3]
[ (hello) /world ]  % Mixed types
----

For dynamic array creation:

[source,postscript]
----
3 array             % Create array of length 3: [null null null]
dup 0 42 put        % Set first element to 42
----

=== String Processing

Strings are commonly used for text and binary data:

[source,postscript]
----
(Hello, World!) length           % Get string length: 13
(PostScript) 0 4 getinterval    % Extract "Post"
(abc) (a) anchorsearch          % Test for prefix
----

=== Array/String Iteration

Process all elements in a collection:

[source,postscript]
----
[1 2 3 4 5] { 10 mul } forall   % Multiply each by 10: 10 20 30 40 50
(abc) { 32 add } forall         % Add 32 to each char code: 97 98 99
----

== Important Considerations

=== Indexing

* Arrays and strings use 0-based indexing
* Valid indices range from 0 to length-1
* Out-of-bounds access generates [`rangecheck`] error

=== Mutability

* Regular arrays are mutable (can be modified)
* Packed arrays (Level 2) are read-only for efficiency
* Strings are mutable (unlike in many other languages)
* Access attributes can restrict modification via [`readonly`]

=== Memory

* Arrays allocated in VM (local or global based on allocation mode)
* Strings allocated in VM
* Packed arrays more memory-efficient than regular arrays
* Subarrays/substrings share the underlying value

=== Type Restrictions

* String elements must be integers 0-255 (character codes)
* Array elements can be any PostScript object
* Type checking errors occur on invalid operations

== See Also

* link:/docs/commands/references/[Stack Manipulation Commands] - For basic data movement
* link:/docs/commands/references/[Arithmetic and Math Commands] - For numeric operations
* Control Flow Commands - For conditional and loop constructs (to be documented)