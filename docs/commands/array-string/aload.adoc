---
layout: default
title: aload
parent: Array and String Operations
grand_parent: Command Reference
nav_order: 4
---

== aload

Loads all elements of an array or packed array onto the operand stack.

=== Syntax

----
array aload → array₀ ... arrayₙ₋₁ array
packedarray aload → packedarray₀ ... packedarrayₙ₋₁ packedarray
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| 0
| `array` or `packedarray`
|===

.After
[cols="1,3"]
|===
| Level | Object

| n
| `array` or `packedarray` (original)

| n-1
| `array₀` (first element)

| ...
| ...

| 0
| `arrayₙ₋₁` (last element)
|===

=== Description

[`aload`](aload.adoc) successively pushes all _n_ elements of an array or packed array onto the operand stack (where _n_ is the length of the operand), and finally pushes the array or packed array itself back onto the stack.

The elements are pushed in index order: element 0 first, element _n_-1 last.

=== PostScript Level

*Level 1* and later (packed arrays in Level 2)

=== Examples

.Basic array unloading
[source,postscript]
----
[23 (ab) -6] aload
% Stack: 23 (ab) -6 [23 (ab) -6]
----

.Processing all elements
[source,postscript]
----
[1 2 3 4 5] aload pop  % Pop the array itself
% Stack: 1 2 3 4 5
{ add } repeat          % Sum all values
% Result: 15
----

.Extracting specific elements
[source,postscript]
----
[100 200 300] aload
% Stack: 100 200 300 [100 200 300]
pop exch pop
% Stack: 200  (middle element extracted)
----

=== Common Use Cases

==== Unpacking Coordinate Pairs

[source,postscript]
----
/point [ 100 200 ] def
point aload pop moveto  % Unpack and use x, y
----

==== Matrix Decomposition

[source,postscript]
----
matrix currentmatrix aload pop
% Stack: a b c d tx ty
----

==== Processing All Array Elements

[source,postscript]
----
[10 20 30] aload pop
% Process each value individually
----

=== Common Pitfalls

WARNING: *Array Remains on Stack* - [`aload`](aload.adoc) leaves the original array on the stack. Use [`pop`](../stack-manipulation/pop.adoc) if you don't need it.

[source,postscript]
----
[1 2 3] aload    % Stack: 1 2 3 [1 2 3]
% Don't forget the array is still there!
----

WARNING: *Stack Overflow* - Loading large arrays can overflow the operand stack.

[source,postscript]
----
1000 array aload  % Might cause stackoverflow
----

TIP: *Use with forall* - For processing array elements, xref:forall.adoc[`forall`] is often more appropriate than [`aload`](aload.adoc).

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`invalidaccess`]
| Array has no-access attribute

| [`stackoverflow`]
| Not enough room on stack for all elements plus array

| [`stackunderflow`]
| No operand on stack

| [`typecheck`]
| Operand is not an array or packed array
|===

=== Implementation Notes

* Elements are shared between the array and stack (not copied)
* Modifying a composite element affects both the array and the stack value
* Works identically for arrays and packed arrays
* The array reference on top of stack can be used to restore values with xref:astore.adoc[`astore`]

=== Performance Considerations

* Loading small arrays is efficient
* For large arrays, consider using xref:get.adoc[`get`] to access specific elements
* For iteration, xref:forall.adoc[`forall`] is more memory-efficient

=== See Also

* xref:astore.adoc[`astore`] - Store stack into array
* xref:get.adoc[`get`] - Get single array element
* xref:getinterval.adoc[`getinterval`] - Get subarray
* xref:forall.adoc[`forall`] - Iterate over array elements
* xref:length.adoc[`length`] - Get array length
* xref:../stack-manipulation/pop.adoc[`pop`] - Remove top stack element