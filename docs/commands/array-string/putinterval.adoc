---
layout: default
title: putinterval
parent: Array and String Operations
grand_parent: Command Reference
nav_order: 10
---

== putinterval

Replaces a subsequence of an array or string with the contents of another array or string.

=== Syntax

----
array1 index array2 putinterval → –
array1 index packedarray2 putinterval → –
string1 index string2 putinterval → –
----

=== Stack Effects

.Before
[cols="1,3"]
|===
| Level | Object

| 2
| `array1` or `string1` (destination)

| 1
| `index` (starting position)

| 0
| `array2`, `packedarray2`, or `string2` (source)
|===

.After
[cols="1,3"]
|===
| Level | Object

| (empty)
| Destination modified in place
|===

=== Description

[`putinterval`](putinterval.adoc) replaces a subsequence of the first operand starting at _index_ with the entire contents of the third operand.

The objects are copied from the source to the destination as if by a sequence of individual xref:get.adoc[`get`] and xref:put.adoc[`put`] operations. For arrays, if copied elements are composite objects, their values are shared between source and destination.

Requirements:
* _index_ must be valid (0 to length-1)
* _index_ + length(source) must not exceed length(destination)

=== PostScript Level

*Level 1* and later

=== Examples

.Array replacement
[source,postscript]
----
/ar [5 8 2 7 3] def
ar 1 [(a) (b) (c)] putinterval
ar  % Now [5 (a) (b) (c) 3]
----

.String replacement
[source,postscript]
----
/st (abc) def
st 1 (de) putinterval
st  % Now (ade)
----

.Copying array segments
[source,postscript]
----
/src [10 20 30] def
/dest [0 0 0 0 0] def
dest 1 src putinterval
dest  % Now [0 10 20 30 0]
----

=== Common Use Cases

==== String Construction

[source,postscript]
----
/buffer 20 string def
buffer 0 (Hello, ) putinterval
buffer 7 (World!) putinterval
buffer 0 13 getinterval  % "Hello, World!"
----

==== Array Merging

[source,postscript]
----
/result 10 array def
result 0 [1 2 3] putinterval
result 3 [4 5 6] putinterval
% result[0..5] = [1 2 3 4 5 6]
----

==== Buffer Management

[source,postscript]
----
/buffer 100 string def
buffer position data putinterval
/position position data length add def
----

=== Common Pitfalls

WARNING: *Destination Must Be Large Enough* - _index_ + length(source) must not exceed destination length.

[source,postscript]
----
[1 2 3] 2 [4 5] putinterval  % Error: 2+2 > 3
----

WARNING: *Cannot Modify Packed Arrays* - Packed arrays are read-only.

[source,postscript]
----
<array> 0 [1 2] putinterval  % Error if <array> is packed
----

WARNING: *Shared Composite Objects* - When copying arrays containing composite objects, the values are shared.

[source,postscript]
----
/src [[1]] def
/dest [null] def
dest 0 src putinterval
dest 0 get 0 99 put  % Modifies BOTH arrays!
----

WARNING: *VM Restrictions* - If destination is in global VM and source contains local VM objects, [`invalidaccess`] error occurs.

TIP: *Efficient Copying* - [`putinterval`](putinterval.adoc) is more efficient than multiple [`put`](put.adoc) operations for bulk copying.

=== Error Conditions

[cols="1,3"]
|===
| Error | Condition

| [`invalidaccess`]
| Destination in global VM contains local VM source, or destination is read-only

| [`rangecheck`]
| _index_ + source length > destination length

| [`stackunderflow`]
| Fewer than 3 operands on stack

| [`typecheck`]
| Wrong operand types or type mismatch
|===

=== Implementation Notes

* Elements are copied, not moved
* For composite array elements, references are copied (values shared)
* Packed arrays can be source but not destination
* String elements are copied by value (integers 0-255)

=== Performance Considerations

* Much faster than individual [`put`](put.adoc) operations
* Efficient for bulk array/string operations
* No intermediate objects created
* Memory bandwidth limited for large copies

=== See Also

* xref:getinterval.adoc[`getinterval`] - Extract subarray/substring
* xref:put.adoc[`put`] - Store single element
* xref:get.adoc[`get`] - Get single element
* xref:astore.adoc[`astore`] - Store stack into array